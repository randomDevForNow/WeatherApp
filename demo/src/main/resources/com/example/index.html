<!DOCTYPE html>
<html>

<head>
  <title>Google Maps Integration</title>
  <style>
    /* Set the size of the map container */
    #map {
      height: 100%;
    }

    html,
    body {
      height: 100%;
      margin: 0;
      padding: 0;
    }

    .card {
      background-color: #f2f9ff;
      /* Light background */
      border: 1px solid #c1d3e0;
      /* Subtle border */
      border-radius: 8px;
      /* Rounded corners */
      box-shadow: 0 2px 8px rgba(0, 0, 0, 0.1);
      /* Light shadow */
      padding: 20px;
      /* Padding around the content */
      max-width: 300px;
      /* Maximum width of the card */
      font-family: 'Arial', sans-serif;
      /* Font style */
    }

    .card img {
      width: 100%;
      /* Full width for the image */
      border-radius: 8px;
      /* Rounded corners for the image */
    }

    .card h2 {
      margin: 10px 0;
      /* Margin for heading */
      font-size: 20px;
      /* Font size for the title */
      color: #333;
      /* Dark color for text */
    }

    .card .rating {
      color: #f39c12;
      /* Color for star rating */
    }

    .card p {
      margin: 5px 0;
      /* Margin for paragraphs */
      color: #666;
      /* Gray color for text */
    }

    .card .distance {
      font-weight: bold;
      /* Bold for distance text */
    }

    .card .status {
      background-color: #e74c3c;
      /* Red background for status */
      color: white;
      /* White text color */
      padding: 5px;
      /* Padding around status */
      border-radius: 5px;
      /* Rounded corners */
      text-align: center;
      /* Center text */
    }
  </style>
  <script src="https://maps.googleapis.com/maps/api/js?key=AIzaSyBjQu-Q3qNLAtrktpgHcmtrH4WLLS7gEo8"></script>
  <script>
    let map;

    let mapStyle = [
      {
        "elementType": "geometry.fill",
        "stylers": [
          {
            "color": "#cbd79c"
          },
          {
            "visibility": "on"
          }
        ]
      },
      {
        "featureType": "administrative",
        "stylers": [
          {
            "color": "#f2f2f2"
          }
        ]
      },
      {
        "featureType": "administrative",
        "elementType": "labels.text.fill",
        "stylers": [
          {
            "color": "#686868"
          },
          {
            "visibility": "on"
          }
        ]
      },
      {
        "featureType": "landscape",
        "stylers": [
          {
            "color": "#f2f2f2"
          }
        ]
      },
      {
        "featureType": "poi",
        "elementType": "labels.icon",
        "stylers": [
          {
            "visibility": "off"
          }
        ]
      },
      {
        "featureType": "poi.park",
        "stylers": [
          {
            "visibility": "on"
          }
        ]
      },
      {
        "featureType": "poi.park",
        "elementType": "labels.icon",
        "stylers": [
          {
            "visibility": "off"
          }
        ]
      },
      {
        "featureType": "road",
        "stylers": [
          {
            "saturation": -100
          },
          {
            "lightness": 45
          }
        ]
      },
      {
        "featureType": "road.arterial",
        "elementType": "geometry",
        "stylers": [
          {
            "lightness": "-16"
          }
        ]
      },
      {
        "featureType": "road.arterial",
        "elementType": "geometry.fill",
        "stylers": [
          {
            "color": "#d7d7d7"
          },
          {
            "visibility": "on"
          }
        ]
      },
      {
        "featureType": "road.arterial",
        "elementType": "labels.icon",
        "stylers": [
          {
            "visibility": "on"
          }
        ]
      },
      {
        "featureType": "road.arterial",
        "elementType": "labels.text",
        "stylers": [
          {
            "visibility": "simplified"
          }
        ]
      },
      {
        "featureType": "road.arterial",
        "elementType": "labels.text.fill",
        "stylers": [
          {
            "saturation": -40
          },
          {
            "lightness": -40
          },
          {
            "visibility": "simplified"
          }
        ]
      },
      {
        "featureType": "road.arterial",
        "elementType": "labels.text.stroke",
        "stylers": [
          {
            "weight": 1
          }
        ]
      },
      {
        "featureType": "road.highway",
        "stylers": [
          {
            "visibility": "simplified"
          }
        ]
      },
      {
        "featureType": "road.highway",
        "elementType": "geometry.fill",
        "stylers": [
          {
            "color": "#b4b4b4"
          },
          {
            "lightness": -20
          },
          {
            "visibility": "on"
          }
        ]
      },
      {
        "featureType": "road.highway",
        "elementType": "geometry.stroke",
        "stylers": [
          {
            "saturation": -50
          },
          {
            "lightness": 10
          }
        ]
      },
      {
        "featureType": "road.highway",
        "elementType": "labels.icon",
        "stylers": [
          {
            "saturation": -100
          },
          {
            "lightness": -10
          },
          {
            "visibility": "off"
          },
          {
            "weight": 1
          }
        ]
      },
      {
        "featureType": "road.highway",
        "elementType": "labels.text",
        "stylers": [
          {
            "saturation": 5
          },
          {
            "lightness": -55
          },
          {
            "visibility": "simplified"
          }
        ]
      },
      {
        "featureType": "road.highway",
        "elementType": "labels.text.fill",
        "stylers": [
          {
            "color": "#9094a0"
          },
          {
            "lightness": -50
          },
          {
            "visibility": "simplified"
          }
        ]
      },
      {
        "featureType": "road.highway",
        "elementType": "labels.text.stroke",
        "stylers": [
          {
            "weight": 6
          }
        ]
      },
      {
        "featureType": "road.highway.controlled_access",
        "elementType": "geometry.fill",
        "stylers": [
          {
            "color": "#b4b4b4"
          },
          {
            "lightness": "7"
          },
          {
            "visibility": "on"
          },
          {
            "weight": "5.40"
          }
        ]
      },
      {
        "featureType": "road.highway.controlled_access",
        "elementType": "labels.text",
        "stylers": [
          {
            "color": "#231f1f"
          },
          {
            "visibility": "simplified"
          }
        ]
      },
      {
        "featureType": "road.highway.controlled_access",
        "elementType": "labels.text.fill",
        "stylers": [
          {
            "color": "#595151"
          },
          {
            "visibility": "simplified"
          }
        ]
      },
      {
        "featureType": "road.local",
        "elementType": "geometry.fill",
        "stylers": [
          {
            "color": "#b4b4b4"
          },
          {
            "lightness": -15
          },
          {
            "weight": 0.5
          }
        ]
      },
      {
        "featureType": "transit",
        "stylers": [
          {
            "visibility": "off"
          }
        ]
      },
      {
        "featureType": "transit.line",
        "elementType": "geometry.fill",
        "stylers": [
          {
            "color": "#eeed6a"
          },
          {
            "visibility": "off"
          }
        ]
      },
      {
        "featureType": "transit.line",
        "elementType": "geometry.stroke",
        "stylers": [
          {
            "color": "#0a0808"
          },
          {
            "visibility": "off"
          }
        ]
      },
      {
        "featureType": "water",
        "stylers": [
          {
            "color": "#b9e2f5"
          },
          {
            "visibility": "on"
          }
        ]
      }
    ];

    function initMap() {
      // Create a new map instance
      map = new google.maps.Map(document.getElementById("map"), {
        center: { lat: 14.566526616029208, lng: 121.01504209325368 },
        zoom: 18,
        disableDefaultUI: true,
      });

      // Map Style
      map.setOptions({ styles: mapStyle });

      // Create the search button
      const searchButton = document.createElement("button");
      searchButton.textContent = "Search this area";
      searchButton.classList.add("custom-map-control-button");
      searchButton.style.display = "none";
      map.controls[google.maps.ControlPosition.TOP_CENTER].push(searchButton);

      // Add event listeners to detect map movement
      map.addListener("idle", () => {
        searchButton.style.display = "block"; // Show button when map stops moving
      });

      searchButton.addEventListener("click", () => {
        // Fetch center coordinates
        const center = map.getCenter();
        const lat = center.lat();
        const lng = center.lng();

        // Call your place search function here
        console.log(`coor ${lat} ${lng}`);

        // Hide the button again after search
        searchButton.style.display = "none";
      });
    }
    //replace with place
    function createMarker(title, type, url, starRating, address, proximity, openingHours, status, position) {
      const content = document.createElement("div");
      content.classList.add("card"); // Apply the main card class

      content.innerHTML = `
        <div class="icon-ctr">
            <img src="./styles/icons/${type.icon}.png" alt="${type.name}">
        </div>
        <div class="img-ctr">
            <img id="${type.icon}" src="./styles/images/places/${url}" alt="${title}">
        </div>
        <div class="notes">
            <h2 id="name">${title}</h2> <!-- Change to h2 for the title -->
            <span id="type">${type.name}</span>
            <span class="rating">${starRating} ★</span> <!-- Add the rating class -->
            <span id="address">${address}</span>
            <span class="distance">${proximity}m</span> <!-- Change to distance class -->
            <span id="opening-hours">${openingHours}</span>
            <span class="status">${status}</span> <!-- Change to status class -->
        </div>
    `;

      // Create a marker on the map
      const marker = new google.maps.Marker({
        position: position,
        map: map,
        title: title,
        icon: `./styles/icons/${type.icon}.png`
      });

      // Attach a click listener to the marker
      marker.addListener("click", () => {
        const infoWindow = new google.maps.InfoWindow({
          content: content
        });
        infoWindow.open(map, marker);
      });
    }


  </script>
</head>

<body onload="initMap()">
  <div id="map"></div>
</body>

</html>